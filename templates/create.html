{% extends "base.html" %}

{% block title %}Create Microlearning - TapUp{% endblock %}

{% block content %}
<div class="create-container">
    <div class="create-header">
        <h1>Create Microlearning</h1>
        <p>Generate a microlearning from content or a URL</p>
    </div>
    
    <div class="create-tabs">
        <button class="tab-btn active" data-tab="url">From URL</button>
        <button class="tab-btn" data-tab="text">From Text</button>
    </div>
    
    <div class="create-content">
        <!-- URL Tab -->
        <div id="urlTab" class="tab-content active">
            <form id="urlForm" class="create-form">
                <div class="form-group">
                    <label for="url">Content URL</label>
                    <input type="url" id="url" name="url" placeholder="https://example.com/article" required>
                    <small>Paste the URL of the article or content you want to convert</small>
                </div>
                
                <div class="form-group">
                    <label for="urlSkill">Target Skill</label>
                    <input type="text" id="urlSkill" name="target_skill" placeholder="Python Programming" value="General">
                    <small>The skill or topic this microlearning covers</small>
                </div>
                
                <div id="urlError" class="error-message" style="display: none;"></div>
                
                <button type="submit" class="btn-primary btn-full">Generate Microlearning</button>
            </form>
        </div>
        
        <!-- Text Tab -->
        <div id="textTab" class="tab-content">
            <form id="textForm" class="create-form">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" id="title" name="title" placeholder="My Microlearning Title" required>
                </div>
                
                <div class="form-group">
                    <label for="content">Content</label>
                    <textarea id="content" name="content" rows="15" placeholder="Paste or type your content here..." required></textarea>
                    <small>Paste the full content you want to convert into a microlearning</small>
                </div>
                
                <div class="form-group">
                    <label for="textSkill">Target Skill</label>
                    <input type="text" id="textSkill" name="target_skill" placeholder="Python Programming" value="General">
                    <small>The skill or topic this microlearning covers</small>
                </div>
                
                <div class="form-group">
                    <label for="description">Description (Optional)</label>
                    <input type="text" id="description" name="description" placeholder="Brief description">
                </div>
                
                <div class="form-group">
                    <label for="sourceUrl">Source URL (Optional)</label>
                    <input type="url" id="sourceUrl" name="url" placeholder="https://example.com/article">
                </div>
                
                <div id="textError" class="error-message" style="display: none;"></div>
                
                <button type="submit" class="btn-primary btn-full">Generate Microlearning</button>
            </form>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Generating your microlearning...</p>
            <small>This may take a minute</small>
        </div>
    </div>
    
    <!-- Result Modal -->
    <div id="resultModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Microlearning Created!</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Microlearning content will be inserted here -->
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" id="closeModalBtn">Close</button>
                <button class="btn-primary" id="viewDashboardBtn">View in Dashboard</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/create.js') }}"></script>
{% endblock %}

